webpackJsonp([5],{0:function(e,t){e.exports=React},12:function(e,t){e.exports=ReactDOM},23:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(16)),i=n(6);t.b=(async e=>{if(null!=e.keywords)return;const t=await fetch(`/api/documents/${e.id}/keywords`),n=await t.json(),a=Object(o.a)(e,{keywords:n.keywords});Object(i.b)("SET_ROOT_ANNOTATION",{rootAnnotation:a})});t.a=(e=>{Object(i.b)("ACTIVATE_ANNOTATION",{annotationId:e})})},28:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=(n.n(a),n(12)),i=(n.n(o),n(6)),r=n(61),l=n(9);Object(o.hydrate)(a.createElement(r.a,Object.assign({},Object(i.a)())),document.getElementById("container")),window.addEventListener(l.b,e=>{Object(o.render)(a.createElement(r.a,Object.assign({},e.detail)),document.getElementById("container"))})},61:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(2)),i=(n.n(o),n(22)),r=n(4),l=(n.n(r),n(62)),s=n(64),c=n(23);const d=e=>({boxSizing:"border-box",minWidth:"648px",padding:"1em 1em 1em calc(65px + 1em)",transition:"all 300ms",whiteSpace:"normal",width:e===r.Aside.None?"100%":"calc(100% - 440px)"}),m=(e,t,a)=>{const o=async(t,a={})=>{const o=new(await n.e(3).then(n.bind(null,79)))(e);o.unmark(),o.mark(t,a)};null!=e&&(null!=a?o(a,{accuracy:"exactly"}):null!=t&&t.hasOwnProperty("query")&&t.query.hasOwnProperty("query_string")&&t.query.query_string.hasOwnProperty("query")&&o(t.query.query_string.query))};t.a=class extends a.PureComponent{constructor(){super(...arguments),this.state={activeAside:r.Aside.Annotations,keyword:null}}render(){return a.createElement(i.a,null,a.createElement("section",{style:{height:"100%",whiteSpace:"nowrap"}},a.createElement("article",{style:d(this.state.activeAside)},a.createElement(s.a,{rootAnnotation:this.props.annotations.rootAnnotation,searchResults:this.props.search.results}),a.createElement("div",{style:{maxWidth:"700px",margin:"auto"}},a.createElement(o.RenderedText,{activateAnnotation:c.a,activeAnnotation:this.props.annotations.activeAnnotation,onRef:e=>m(e,this.props.search.results,this.state.keyword),root:this.props.annotations.rootAnnotation,tags:o.PergamonUITags}))),a.createElement(l.a,{activateAnnotation:c.a,activeAnnotation:this.props.annotations.activeAnnotation,onChangeActiveAside:e=>{const t=this.state.activeAside;this.setState({activeAside:e},()=>{t!==r.Aside.None&&e!==r.Aside.None||setTimeout(()=>{window.dispatchEvent(new Event("resize"))},350)})},onClickKeyword:e=>this.setState({keyword:e}),rootAnnotation:this.props.annotations.rootAnnotation})))}}},62:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(4)),i=(n.n(o),n(2)),r=(n.n(i),n(63));t.a=(e=>a.createElement(o.HucOffCanvasAside,{onChangeActiveAside:e.onChangeActiveAside,open:!0},a.createElement(o.Panel,{title:"Metadata",type:o.Aside.Metadata},a.createElement(r.a,{rootAnnotation:e.rootAnnotation}),a.createElement(i.Keywords,{keywords:e.rootAnnotation.keywords,onClickKeyword:e.onClickKeyword})),a.createElement(o.Panel,{title:"Named entities",type:o.Aside.Annotations},a.createElement(i.AnnotationList,{activateAnnotation:e.activateAnnotation,activeAnnotation:e.activeAnnotation,filter:e=>["persName","placeName","geogName","name","rs"].indexOf(e.type)>-1,rootAnnotation:e.rootAnnotation}),a.createElement("h2",{style:{margin:"1em 0"}},"Notes"),a.createElement(i.AnnotationList,{activateAnnotation:e.activateAnnotation,activeAnnotation:e.activeAnnotation,filter:e=>["note"].indexOf(e.type)>-1,rootAnnotation:e.rootAnnotation}))))},63:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(23));const i=(e,t="text/plain")=>{const n=document.createElement("a"),a=URL.createObjectURL(new Blob([e],{type:t}));n.href=a,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)},r=e=>a.createElement("ul",{style:{fontFamily:"'Roboto', sans-serif",listStyle:"none",margin:"3em 0",maxWidth:"550px",padding:0}},e.children),l=e=>a.createElement("li",{style:{marginBottom:"1em"}},e.children),s=e=>a.createElement("label",{style:{color:"#888",fontSize:".7em"}},e.children);t.a=class extends a.PureComponent{componentDidMount(){const e=this.props.rootAnnotation;null!=e.id&&Object(o.b)(e)}render(){return a.createElement(r,null,a.createElement(l,null,a.createElement(s,null,"XML"),a.createElement("div",null,a.createElement("button",{onClick:async()=>{const e=await fetch(`/api/documents/${this.props.rootAnnotation.id}/orig`),t=await e.text();i(t,"text/xml")}},"Download"))),a.createElement(l,null,a.createElement(s,null,"ID"),a.createElement("div",null,this.props.rootAnnotation.id)),a.createElement(l,null,a.createElement(s,null,"CORRESPONDENCE"),a.createElement("div",null,this.props.rootAnnotation.metadata.get("correspondence"))),a.createElement(l,null,a.createElement(s,null,"DATE"),a.createElement("div",null,this.props.rootAnnotation.metadata.get("date"))),a.createElement(l,null,a.createElement(s,null,"SENDER"),a.createElement("div",null,this.props.rootAnnotation.metadata.get("sender"))),a.createElement(l,null,a.createElement(s,null,"SENDER LOCATION"),a.createElement("div",null,this.props.rootAnnotation.metadata.get("senderloc"))),a.createElement(l,null,a.createElement(s,null,"RECIPIENT"),a.createElement("div",null,this.props.rootAnnotation.metadata.get("recipient"))),a.createElement(l,null,a.createElement(s,null,"RECIPIENT LOCATION"),a.createElement("div",null,this.props.rootAnnotation.metadata.get("recipientloc"))))}}},64:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(2)),i=(n.n(o),n(65)),r=n(10);const l=e=>a.createElement("div",{style:{display:"grid",gridTemplateColumns:"3fr 1fr",margin:"3em auto",width:"550px"}},e.children);t.a=(e=>a.createElement(l,null,a.createElement(o.Metadata,{rootAnnotation:e.rootAnnotation}),a.createElement("div",{style:{display:"grid",gridTemplateRows:"1fr 1fr"}},a.createElement("button",{onClick:()=>Object(r.a)("/search"),style:{height:"2em"}},"< search results"),a.createElement(i.a,Object.assign({},e)))))},65:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(66)),i=n(11);t.a=(e=>{if(null==e.searchResults||!e.searchResults.hits.length)return null;const t=e.searchResults.hits.findIndex(t=>t.id===e.rootAnnotation.id),n=e.searchResults.hits[t-1],r=e.searchResults.hits[t+1];return null==r&&Object(i.a)(),a.createElement("ul",{style:{listStyle:"none",margin:0,padding:0,textAlign:"right"}},null!=n&&a.createElement("li",{style:{display:"inline-block"}},a.createElement(o.a,{annotation:n},"< prev")),null!=r&&a.createElement("li",{style:{display:"inline-block",marginLeft:"1em"}},a.createElement(o.a,{annotation:r},"next >")))})},66:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(10));t.a=(e=>a.createElement("button",{onClick:t=>{Object(o.a)(`/documents/${e.annotation.id}`)}},e.children))}},[28]);